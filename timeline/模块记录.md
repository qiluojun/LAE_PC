# 模块记录 

主体——timelineV4.py
    主运行程序



# V3 以前的设置：
## 主程序文件摘要：
class MyWindow(QMainWindow)为主窗口的类
    self.ui = Ui_MainWindow()
        from mainwindow import Ui_MainWindow
→据此建立 main_window 主体示例
app = QApplication(sys.argv)
main_window = MyWindow()

class子窗口：
    1.new_period_window
        from new_period import Ui_Dialog as Ui_Dialog1 
    2.end_period_window 
        from end_period import Ui_Dialog as Ui_Dialog2
    3.basic_state_record_window
        from basicStateRecord import Ui_Dialog as Ui_Dialog3

从md中读取time_periode的时间设置值
    00-MOC\timeline.md



main_window.ui.current_period_name_label.setText

def read_plan()：从当天日志中 读取 当天的总活动内容 和分条活动内容
    activities,plan_show = read_activity(plan)
        from activityCode import read_activity
    
def refresh_plan()
    与主界面的show_plan按钮对应 

def lock(locking_time): 生成锁屏界面（属于main_window）
    main_window.lock_window= LockScreenWindow(locking_time,period_index1)
        from lock_screen import LockScreenWindow
并且与主界面 立刻锁屏 按钮连接

def check_period(): 得到当前时间+ 确定时段情况
    1.确定当前时段的时段序号 period_index1
        依据是timeline的默认时间值 
    而period_index2是timeline实际采取的时段序号
    2.一旦当前时段和上一时段不一样：
        锁屏——原时段为空 现在进入新的时段 
        询问是否结束当前时段——感觉此处逻辑怪怪的
            ask_if_end_current_period()
            规则：period_index1=0 or index2 ≠0
            包括：程序启动 发现位于非空时段
            运行中 一个非空时段结束了
    3.2140以后锁屏

定义 定时器 连接check_period（）
    check_period_timer= QTimer()  1min运行一次


def on_closing() 连接主窗口close按钮

def start_new_period():
    1.start_by_set
    2.start_by_recommend
    皆连接 read_plan()
    定义 子窗口（按钮驱动） main_window.child_window1=new_period_window()
与开启新时段子窗口（child_window1）俩扭连接

def end_current_period():结束当前时段 并且将md对应内容写入对应地方
    end_activity()：写入内容
        定义在下面 
    
def ask_if_start_new_period(): ！！！实际没用这个函数！！！！
    定义自动弹出的 子窗口 
        main_window.child_window2=end_period_window()
    弹出 询问开始新时段 子窗口（main_window.child_window2）
    连接 start_new_period()

def ask_if_end_current_period():
    定义自动弹出的 子窗口
        main_window.child_window3 = end_period_window()
    弹出 询问是否结束当前时段 子窗口
        main_window.child_window3
与主窗口 开启/关闭新时段 和 close按钮 连接

def update_activity():将选中的活动呈现在对应标签上（和主窗口按钮绑定）

def basic_state_record():
    main_window.child_window4 = basic_state_record_window()
    def basic_state_record_generate():
        获得输入的数据
        写入数据库：write_state（）
            from new_state_recorder import write_state
        main_window.current_state= State(basic_state,period_index1) 检查状态是否正常 焦虑过大锁屏
            from state_checker import State

与主窗口按钮连接



def end_activity()

开机自动 check_period()

app.exec()


## 灵感 
我突然意识到 这种模块管理 可以用流程图图示吗？如果也能有列表整理呈现所有的变量名 函数名 模块名称就好了
    有点像matlab的变量空间！
函数之间 哪里定的义 哪里进行调用 嗯……要是有逻辑图啥的就好了 
查查知乎 有无这类软件啥的？
说不定VS有这种功能？

### 知乎学习内容：
写代码之前 先设计 可以用流程图（软件或手写） 把模块功能搞定 
然后 写伪代码！  活用py注释功能  
然后对照着扩写代码 好耶！
以及 伪代码：可以用md！我焯！好耶！！！  